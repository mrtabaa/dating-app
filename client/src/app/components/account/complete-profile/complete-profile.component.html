<section>
    <h6 class="title">Please complete your profile to attract more people.</h6>
    <mat-stepper [linear]="true" #stepper [orientation]="isMobileSig() ? 'vertical' : 'horizontal'">
        <mat-step [stepControl]="starterFg">
            <!-- Name and Location -->
            <div class="container">
                <form [formGroup]="starterFg">
                    <ng-template matStepLabel>{{starterLable}}</ng-template>
                    <mat-form-field appearaance="outline">
                        <mat-label>Name or Nickname</mat-label>
                        <input formControlName="knownAsCtrl" matInput placeholder="Nickname" required>
                        @if(KnownAsCtrl.hasError('required')) {
                        <mat-error>This field is required.</mat-error>
                        }
                        @if(KnownAsCtrl.hasError('maxlength')) {
                        <mat-error>Up to {{maxInputChars}} is allowed.</mat-error>
                        }
                    </mat-form-field>
                    <!-- Location -->
                    <app-google-places />
                    @if(countrySig() && isCountrySelectedSig()) {
                    <div class="buttons">
                        <button type="submit" mat-raised-button color="primary" matStepperNext>Next</button>
                    </div>
                    }
                </form>
            </div>
        </mat-step>
        <!-- Photos -->
        <mat-step [stepControl]="photosCtrl" optional>
            <div class="container photos">
                <form>
                    @if(!isMobileSig()) { <!-- Desktop -->
                    <div class="buttons">
                        <button mat-stroked-button color="primary" matStepperPrevious>Back</button>
                        <button [disabled]="isUploading" mat-raised-button color="primary" matStepperNext>Next</button>
                    </div>
                    }
                    <ng-template matStepLabel>{{photosLabel}}</ng-template>
                    @if(member) {
                    <app-photo-editor [member]="member" (isUploadingOut)="setIsUploadingPhoto($event)" />
                    }
                    @if(isMobileSig()) { <!-- Mobile -->
                    <div class="buttons">
                        <button mat-stroked-button color="primary" matStepperPrevious>Back</button>
                        <button [disabled]="isUploading" mat-raised-button color="primary" matStepperNext>Next</button>
                    </div>
                    }
                </form>
            </div>
        </mat-step>
        <!-- Introduction -->
        <mat-step [stepControl]="introductionCtrl" optional="true">
            <div class="container">
                <form>
                    <ng-template matStepLabel>{{introductionLabel}}</ng-template>
                    <mat-form-field appearaance="outline">
                        @if(isMobileSig()) {
                        <mat-label>Describe yourself</mat-label>
                        }
                        @else {
                        <mat-label>What should people know about you?</mat-label>
                        }
                        <textarea cdkTextareaAutosize [formControl]="introductionCtrl" [value]="IntroductionCtrl.value"
                            placeholder="Say something about yourself" matInput>
                    {{IntroductionCtrl.value}}
                    </textarea>
                        <mat-hint>{{IntroductionCtrl.value?.length}} of {{maxTextAreaChars}}</mat-hint>
                        @if (IntroductionCtrl.hasError('maxlength')) {
                        <mat-error>
                            Maximum of {{maxTextAreaChars}} characters is reached.
                        </mat-error>
                        }
                    </mat-form-field>
                    <div class="buttons saveAngNext">
                        <button mat-stroked-button color="primary" matStepperPrevious>Back</button>
                        <button (click)="saveAngNext()" mat-raised-button color="primary" matStepperNext>Save &
                            Next</button>
                    </div>
                </form>
            </div>
        </mat-step>
        <!-- Interest -->
        <mat-step [stepControl]="interestsCtrl" optional="true">
            <div class="container">
                <form>
                    <ng-template matStepLabel>{{interestsLabel}}</ng-template>
                    <mat-form-field appearaance="outline">
                        @if(isMobileSig()) {
                        <mat-label>Share your interests</mat-label>
                        }
                        @else {
                        <mat-label>Anything you are interested in</mat-label>
                        }
                        <textarea cdkTextareaAutosize [formControl]="interestsCtrl" [value]="InterestsCtrl.value"
                            placeholder="Any interests?" matInput>
                {{InterestsCtrl.value}}
                </textarea>
                        <mat-hint>{{InterestsCtrl.value?.length}} of {{maxTextAreaChars}}</mat-hint>
                        @if (InterestsCtrl.hasError('maxlength')) {
                        <mat-error>
                            Maximum of {{maxTextAreaChars}} characters is reached.
                        </mat-error>
                        }
                    </mat-form-field>
                    <div class="buttons saveAngNext">
                        <button mat-stroked-button color="primary" matStepperPrevious>Back</button>
                        <button (click)="saveAngNext()" mat-raised-button color="primary" matStepperNext>Save &
                            Next</button>
                    </div>
                </form>
            </div>
        </mat-step>
        <!-- Looking For -->
        <mat-step [stepControl]="lookingForCtrl" optional="true">
            <div class="container">
                <form>
                    <ng-template matStepLabel>{{lookingForLabel}}</ng-template>
                    <mat-form-field appearaance="outline">
                        <mat-label>What are you looking for?</mat-label>
                        <textarea cdkTextareaAutosize [formControl]="lookingForCtrl" [value]="LookingForCtrl.value"
                            placeholder="Anything you are looking for?" matInput>
                {{LookingForCtrl.value}}
                </textarea>
                        <mat-hint>{{LookingForCtrl.value?.length}} of {{maxTextAreaChars}}</mat-hint>
                        @if (LookingForCtrl.hasError('maxlength')) {
                        <mat-error>
                            Maximum of {{maxTextAreaChars}} characters is reached.
                        </mat-error>
                        }
                    </mat-form-field>
                    <div class="buttons saveAngNext">
                        <button mat-stroked-button color="primary" matStepperPrevious>Back</button>
                        <button (click)="saveAngNext()" mat-raised-button color="primary"
                            matStepperNext>Save & Next</button>
                    </div>
                </form>
            </div>
        </mat-step>
        <!-- Review and Submit -->
        <mat-step>
            <div class="container">
                <ng-template matStepLabel>Review & Submit</ng-template>
                <form class="review-submit">
                    <p class="title">Review each section and Submit</p>
                    <mat-accordion>
                        <mat-expansion-panel [expanded]="true">
                            <mat-expansion-panel-header>
                                <mat-panel-title>
                                    {{starterLable}}
                                </mat-panel-title>
                                @if(!isMobileSig()) {
                                <mat-panel-description>
                                    {{starterSummary}}
                                </mat-panel-description>
                                }
                            </mat-expansion-panel-header>
                            @if(isMobileSig()) {
                            <ul>
                                <li>{{KnownAsCtrl.value}}</li>
                                <li>{{countrySig()}}
                                    @if("/assets/images/flags/4x3/{{countryAcrSig()?.toLowerCase()}}.svg") {
                                    <img ngSrc="/assets/images/flags/4x3/{{countryAcrSig()?.toLowerCase()}}.svg"
                                        alt="flag" width="25" height="15">
                                    }
                                </li>
                                <li>{{stateSig()}}</li>
                                <li>{{citySig()}}</li>
                            </ul>
                            }
                            @else {
                            <ul>
                                <li><strong>Name/NickName:</strong> {{KnownAsCtrl.value}}</li>
                                <li><strong>Country:</strong>
                                    {{countrySig()}}
                                    @if("/assets/images/flags/4x3/{{countryAcrSig()?.toLowerCase()}}.svg") {
                                    <img ngSrc="/assets/images/flags/4x3/{{countryAcrSig()?.toLowerCase()}}.svg"
                                        alt="flag" width="25" height="15">
                                    }
                                </li>
                                <li><strong>State:</strong> {{stateSig()}}</li>
                                <li><strong>City:</strong> {{citySig()}}</li>
                            </ul>
                            }
                        </mat-expansion-panel>
                        <mat-expansion-panel>
                            <mat-expansion-panel-header>
                                <mat-panel-title>
                                    {{photosLabel}}
                                </mat-panel-title>
                                @if(!isMobileSig()) {
                                <mat-panel-description>
                                    You can still modify your photos
                                </mat-panel-description>
                                }
                            </mat-expansion-panel-header>
                            @if(member) {
                            <app-photo-editor [member]="member" />
                            }
                        </mat-expansion-panel>
                        <mat-expansion-panel>
                            <mat-expansion-panel-header>
                                <mat-panel-title>
                                    {{introductionLabel}}
                                </mat-panel-title>
                                @if(!isMobileSig()) {
                                <mat-panel-description>
                                    What you want people know about you
                                </mat-panel-description>
                                }
                            </mat-expansion-panel-header>
                            <p>{{IntroductionCtrl.value}}</p>
                        </mat-expansion-panel>
                        <mat-expansion-panel>
                            <mat-expansion-panel-header>
                                <mat-panel-title>
                                    {{interestsLabel}}
                                </mat-panel-title>
                                @if(!isMobileSig()) {
                                <mat-panel-description>
                                    Your interests are
                                </mat-panel-description>
                                }
                            </mat-expansion-panel-header>
                            <p>{{InterestsCtrl.value}}</p>
                        </mat-expansion-panel>
                        <mat-expansion-panel>
                            <mat-expansion-panel-header>
                                <mat-panel-title>
                                    {{lookingForLabel}}
                                </mat-panel-title>
                                @if(!isMobileSig()) {
                                <mat-panel-description>
                                    You are looking for
                                </mat-panel-description>
                                }
                            </mat-expansion-panel-header>
                            <p>{{lookingForCtrl.value}}</p>
                        </mat-expansion-panel>
                    </mat-accordion>
                    <div class="buttons">
                        <button mat-stroked-button color="primary" matStepperPrevious>Back</button>
                        <button (click)="submit()" type="submit" mat-raised-button color="primary">Submit</button>
                        <button mat-stroked-button color="warn" (click)="stepper.reset(); resetCountry()">Reset</button>
                    </div>
                </form>
            </div>
        </mat-step>
    </mat-stepper>
</section>