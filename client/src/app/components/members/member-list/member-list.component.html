<main>
    <form [formGroup]="filterFg" class="sidebar">
        <div class="order-by">
            <p class="title">Order members</p>
            <mat-form-field>
                <mat-label>Order by</mat-label>
                <mat-select formControlName="orderByCtrl" (selectionChange)="updateMemberParams()">
                    @for (orderOption of orderOptions; track $index) {
                    <mat-option [value]="orderOption" (click)="getMembers()"
                        [disabled]="orderOption === memberParams?.orderBy">{{orderOptionsView[$index]}}</mat-option>
                    }
                </mat-select>
            </mat-form-field>
        </div>
        <mat-divider></mat-divider>
        <div class="filter">
            <p class="title">Filter members</p>
            <section class="filters">
                <!-- Gender -->
                <mat-form-field>
                    <mat-label>By gender</mat-label>
                    <mat-select formControlName="genderCtrl" (selectionChange)="updateMemberParams()">
                        <mat-option [value]="'female'">Female</mat-option>
                        <mat-option [value]="'male'">Male</mat-option>
                        <mat-option [value]="'other'">Other</mat-option>
                    </mat-select>
                </mat-form-field>
                <!-- Age -->
                <div class="age">
                    <p>By age range</p>
                    <div class="slider">
                        <mat-slider min="{{minAge}}" max="{{maxAge}}" discrete>
                            <input formControlName="minAgeCtrl" matSliderStartThumb>
                            <input formControlName="maxAgeCtrl" matSliderEndThumb>
                        </mat-slider>
                    </div>
                </div>
            </section>
            <!-- Buttons -->
            <div class="buttons">
                <button mat-stroked-button (click)="initResetFilter()" color="warn">
                    Reset
                </button>
                <button mat-stroked-button (click)="getMembers()" color="primary">
                    Apply Filters
                </button>
            </div>
        </div>
    </form>
    <mat-divider vertical></mat-divider>
    <section class="members-container">
        <h3>Find Your Beloved One!</h3>
        <div class="members">
            @if (members?.length === 0) {
            <p>No user exists with this filter. Please change the filter values or Reset the filter.</p>
            }
            @for (member of members; track $index) {
            <app-member-card [memberIn]="member"
                (FollowModifiedOut)="modifyFollowUnfollowIcon($event)"></app-member-card>
            }
        </div>
        @if (pagination && memberParams) {
        <mat-paginator class="paginator" #paginator (page)="handlePageEvent($event)" [length]="pagination.totalItems"
            [pageSize]="memberParams.pageSize" [disabled]="false" [showFirstLastButtons]="showFirstLastButtons"
            [pageSizeOptions]="showPageSizeOptions ? pageSizeOptions : []" [hidePageSize]="hidePageSize"
            [pageIndex]="memberParams.pageNumber - 1" aria-label="Select page" class="paginator">
            <!-- pageIndex must start from 0 -->
        </mat-paginator>
        }
    </section>
</main>